<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.141.0"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>johnpoint's blog</title>
<meta name=keywords content="blog,johnpoint"><meta name=description content="johnpoint's blog"><meta name=author content="johnpoint"><link rel=canonical href=https://blog.lvcshu.com/><link crossorigin=anonymous href=/assets/css/stylesheet.9a07b9c81cbc95fa741d61ca6489dcdb8491591c19dca31d14a124a4ba95ec80.css integrity="sha256-mge5yBy8lfp0HWHKZInc24SRWRwZ3KMdFKEkpLqV7IA=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.lvcshu.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.lvcshu.com/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://blog.lvcshu.com/favicon.ico><link rel=apple-touch-icon href=https://blog.lvcshu.com/favicon.ico><link rel=mask-icon href=https://blog.lvcshu.com/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.lvcshu.com/index.xml><link rel=alternate type=application/json href=https://blog.lvcshu.com/index.json><link rel=alternate hreflang=en href=https://blog.lvcshu.com/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="johnpoint's blog"><meta property="og:description" content="johnpoint's blog"><meta property="og:type" content="website"><meta property="og:url" content="https://blog.lvcshu.com/"><meta property="og:site_name" content="johnpoint's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="johnpoint's blog"><meta name=twitter:description content="johnpoint's blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"johnpoint's blog","url":"https://blog.lvcshu.com/","description":"johnpoint's blog","thumbnailUrl":"https://blog.lvcshu.com/favicon.ico","sameAs":["https://t.me/johnpoint","https://blog.lvcshu.com/index.xml","https://github.com/johnpoint","mailto:me@lvcshu.com"]}</script></head><body class="list dark" id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.lvcshu.com/ accesskey=h title="johnpoint's blog (Alt + H)">johnpoint's blog</a><div class=logo-switches><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://blog.lvcshu.com/posts/ title=归档><span>归档</span></a></li><li><a href=https://blog.lvcshu.com/friends/ title=友链><span>友链</span></a></li><li><a href=https://blog.lvcshu.com/about/ title=关于我><span>关于我</span></a></li><li><a href=https://blog.lvcshu.com/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class="first-entry home-info"><header class=entry-header><h1>(｡･∀･)ﾉﾞ嗨</h1></header><div class=entry-content>接下来折腾啥好呢？</div><footer class=entry-footer><div class=social-icons><a href=https://t.me/johnpoint target=_blank rel="noopener noreferrer me" title=Telegram><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.198 2.433a2.242 2.242.0 00-1.022.215l-8.609 3.33c-2.068.8-4.133 1.598-5.724 2.21a405.15 405.15.0 01-2.849 1.09c-.42.147-.99.332-1.473.901-.728.968.193 1.798.919 2.286 1.61.516 3.275 1.009 4.654 1.472.509 1.793.997 3.592 1.48 5.388.16.36.506.494.864.498l-.002.018s.281.028.555-.038a2.1 2.1.0 00.933-.517c.345-.324 1.28-1.244 1.811-1.764l3.999 2.952.032.018s.442.311 1.09.355c.324.022.75-.04 1.116-.308.37-.27.613-.702.728-1.196.342-1.492 2.61-12.285 2.997-14.072l-.01.042c.27-1.006.17-1.928-.455-2.474a1.654 1.654.0 00-1.034-.407z"/></svg>
</a><a href=https://blog.lvcshu.com/index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg>
</a><a href=https://github.com/johnpoint target=_blank rel="noopener noreferrer me" title=Github><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=mailto:me@lvcshu.com target=_blank rel="noopener noreferrer me" title=Email><svg viewBox="0 0 24 21" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></div></footer></article><article class=post-entry><header class=entry-header><h2>2023 年度总结</h2></header><div class=entry-content><p>又是一年平安夜，又到了每年一次固定写年度总结的时候了，在12月末看看今年我到底做了啥。
...</p></div><footer class=entry-footer><span title='2023-12-24 20:00:00 +0800 CST'>2023-12-24 20:00:00</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;55 words&nbsp;·&nbsp;johnpoint</footer><a class=entry-link aria-label="post link to 2023 年度总结" href=https://blog.lvcshu.com/2023/12/24/2023-%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/></a></article><article class=post-entry><header class=entry-header><h2>Hackergame 2023 writeups</h2></header><div class=entry-content><p>久违的参加 hackergame 了，前两年都忙得忘记了还有这个好玩的比赛，上一次参加已经是2020年的事情了
最终成绩 当前分数：2750， 总排名：260 / 2386 AI：0 ， binary：200 ， general：1550 ， math：200 ， web：800 hackergame 启动 一道简单的签到题，显而易见的我不可能通过录制音频来过这个题目，于是我直接F12看源代码，这个相似度是使用js评估得出来然后放进一个不显示的元素里面的，于是我直接自己将100放进这个元素内，然后提交，这样就得到了第一个flag flag{wELcoM3-7O-HaCk3Rg@Me-AnD-enJOy-hACKIN9-20Z3}
猫咪小测 又是经典的搜索引擎时间
想要借阅世界图书出版公司出版的《A Classical Introduction To Modern Number Theory 2nd ed.》，应当前往中国科学技术大学西区图书馆的哪一层？ 很容易就能找到中国科学技术大学图书馆的官方网站，里面有提供图书检索的功能，搜到这本书馆藏在西区图书馆的外文书库 于是搜索西区图书馆的简介，可得外文书库在12楼 今年 arXiv 网站的天体物理版块上有人发表了一篇关于「可观测宇宙中的鸡的密度上限」的论文，请问论文中作者计算出的鸡密度函数的上限为 10 的多少次方每立方秒差距？ 这个随便搜搜就出来了，可得 23 为了支持 TCP BBR 拥塞控制算法，在编译 Linux 内核时应该配置好哪一条内核选项？ 使用 google 搜索这几个关键词 tcp bbr 编译 "config_" 可以找到这篇文章 由于这次的题目是能明确看到分数的，所以逐个试试就可以得到答案为 CONFIG_TCP_CONG_BBR 🥒🥒🥒：「我……从没觉得写类型标注有意思过」。在一篇论文中，作者给出了能够让 Python 的类型检查器 MyPY mypy 陷入死循环的代码，并证明 Python 的类型检查和停机问题一样困难。请问这篇论文发表在今年的哪个学术会议上？ 这题目有点难，但是我打开了bing ai找到了一些相关的信息 虽然没有得到最终正确的答案，但是我找到了新的关键词 esop python type checking is undecidable 把它塞进 google 搜索，可以找到 这篇论文 论文的角落就写着学术回忆的缩写 ...</p></div><footer class=entry-footer><span title='2023-11-04 12:00:00 +0800 CST'>2023-11-04 12:00:00</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;419 words&nbsp;·&nbsp;johnpoint</footer><a class=entry-link aria-label="post link to Hackergame 2023 writeups" href=https://blog.lvcshu.com/2023/11/04/2023-hackergame-writeups/></a></article><article class=post-entry><header class=entry-header><h2>我们要对 Newsletter 说不(吗？)</h2></header><div class=entry-content><p>刚看了 diygod 发布的这篇文章 对 Newsletter 说不，对其中的一部分观点不是很认同，但是没有钱包的我没有办法去进行留言评论，索性就借此机会水一篇博客吧
这些问题让我觉得 Newsletter 就像一个没有能力但却拼命想证明自己的暴君，无法很好达到发布者期望的效果，又过分侵犯了用户的选择和效率。
没有一种技术是想要证明自己的，想要证明自己的永远是在技术后面的人。
相比之下，RSS 更加简洁高效。订阅源可以集中管理，分类、收藏、订阅和取消订阅的过程也非常简单。而 Newsletter 则会将各种各样的邮件混合在一起，非常分散且难以管理。你很难知道自己到底订阅了哪些内容，它们什么时候会突然出现。而且，内容格式也是各种各样的，查看和阅读起来非常混乱，所以你也不能将一篇文章进行收藏，更不用说方便的第三方集成了。
Newsletter 很难对内容进行有效分类和过滤，又与所有正常邮件混合在一起，需要花费精力手动整理。这很容易导致信息过载和垃圾邮件的问题。
而 RSS 可以很方便地进行分类和过滤，对于不重要的内容，你也可以一键全部标记为已读瞬间解脱，完全没有压力。
在我使用过的大部分邮件客户端或者说网页端的邮件管理页面来说都有自动归类以及一键已读的功能。
对于 RSS 的更新虽然不算实时，但一般以小时计，类似 RSSHub 等自建服务，甚至可以做到每分钟更新。相比之下，Newsletter 的更新周期，以天甚至周月计，明显滞后了许多。
明显的概念混淆，在上面的一段话中 RSS的更新==RSS主动拉取新内容的时间 但是 newsletter更新时间==newsletter发送者更新的时间 这两者并不等同，而且就算RSS每隔五分钟去拉取一次更新，但是RSS提供者不更新的情况就算你拉得再快也没有用，反观 newsletter 在一般情况下一有新文章更新则会立即推送到读者手中，这不是更新更加及时吗？
RSS 的开放性体现在它不需要用户提供个人信息，从而确保了更好的隐私性和安全性。然而，Newsletter 至少需要提供一个邮箱地址，这增加了数据泄露或滥用的风险。更有甚者，电子邮件可能包含恶意链接或附件。
电子邮件可能包含恶意链接或者附件，那 RSS 返回的数据就不会有任何风险了吗？
总结 总的来说，其实 RSS 和 Newsletter 更像是在同一条内容分发赛道上面的不同方向的技术解决方案，RSS 更倾向于面对公众群体的公告板式的内容分发，Newsletter 更倾向于向特定群体提供及时的内容推送服务，两种技术解决方案各有优劣，RSS 代表的是 pull，Newsletter 代表的是 push，一概而论的进行讨论真的很奇怪。
我在这里提出一些 我没有数据支持的观点
Newsletter 的打开率要比 RSS 要高 Newsletter 一般情况下来说平均质量要高 Newsletter 在付费领域比 RSS 更有优势</p></div><footer class=entry-footer><span title='2023-07-13 14:04:00 +0800 CST'>2023-07-13 14:04:00</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;63 words&nbsp;·&nbsp;johnpoint</footer><a class=entry-link aria-label="post link to 我们要对 Newsletter 说不(吗？)" href=https://blog.lvcshu.com/2023/07/13/%E6%88%91%E4%BB%AC%E8%A6%81%E5%AF%B9-newsletter-%E8%AF%B4%E4%B8%8D%E5%90%97/></a></article><article class=post-entry><header class=entry-header><h2>使用 logstash 采集来自腾讯云 tke 的日志</h2></header><div class=entry-content><p>前提 好久没有给博客除草了，正好最近折腾了下 logstash，记录一下。
为啥要用 logstash 呢，其实是因为在测试环境上面腾讯云 tke 的日志没有开启日志收集，所以在排查问题的时候会十分的痛苦，正好有空了就想着将日志抽出来放进 es 里面，方便以后排查问题，正好看到腾讯云的日志规则是允许将 pod 的 stdout 日志进行采集之后投递到 kafka 的，就小试了一下。
部署 logstash logstash 我选择使用 docker-compose 来进行快速的部署。
以下是部署流程，参考自 deviantony/docker-elk 项目
创建目录 mkdir logstash/config logstash/pipeline -p 创建环境变量 路径 .env
ELASTIC_VERSION=8.7.1 LOGSTASH_INTERNAL_PASSWORD='changeme' 创建 Dockerfile 路径 logstasg/Dockerfile
ARG ELASTIC_VERSION # https://www.docker.elastic.co/ FROM docker.elastic.co/logstash/logstash:${ELASTIC_VERSION} 配置文件 路径 logstash/config/logstash.yml
--- ## Default Logstash configuration from Logstash base image. ## https://github.com/elastic/logstash/blob/main/docker/data/logstash/config/logstash-full.yml # http.host: 0.0.0.0 node.name: logstash 路径 logstash/pipeline/logstash.conf
input { beats { port => 5044 } tcp { port => 50000 } } ## Add your filters / logstash plugins configuration here output { elasticsearch { hosts => "elasticsearch:9200" user => "logstash_internal" password => "${LOGSTASH_INTERNAL_PASSWORD}" index => "logstash-%{+YYYY-MM-dd}" } } 启动服务 version: '3.7' services: logstash: build: context: logstash/ args: ELASTIC_VERSION: ${ELASTIC_VERSION} volumes: - ./logstash/config/logstash.yml:/usr/share/logstash/config/logstash.yml:ro,Z - ./logstash/pipeline:/usr/share/logstash/pipeline:ro,Z ports: - 5044:5044 - 50000:50000/tcp - 50000:50000/udp - 9600:9600 environment: LS_JAVA_OPTS: -Xms256m -Xmx256m LOGSTASH_INTERNAL_PASSWORD: ${LOGSTASH_INTERNAL_PASSWORD:-} depends_on: - elasticsearch restart: unless-stopped 配置 logstash pipeline 配置 input 因为日志要从 kafka 读取，所以要在 input 块内声明一个新的数据源
...</p></div><footer class=entry-footer><span title='2023-05-15 10:34:44 +0800 CST'>2023-05-15 10:34:44</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1200 words&nbsp;·&nbsp;johnpoint</footer><a class=entry-link aria-label="post link to 使用 logstash 采集来自腾讯云 tke 的日志" href=https://blog.lvcshu.com/2023/05/15/%E4%BD%BF%E7%94%A8-logstash-%E9%87%87%E9%9B%86%E6%9D%A5%E8%87%AA%E8%85%BE%E8%AE%AF%E4%BA%91-tke-%E7%9A%84%E6%97%A5%E5%BF%97/></a></article><article class=post-entry><header class=entry-header><h2>2022 年度总结</h2></header><div class=entry-content><p>来了来了，晚到了几天的年度总结，但是总算是没有鸽掉 ~
...</p></div><footer class=entry-footer><span title='2022-12-29 10:00:00 +0800 CST'>2022-12-29 10:00:00</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;92 words&nbsp;·&nbsp;johnpoint</footer><a class=entry-link aria-label="post link to 2022 年度总结" href=https://blog.lvcshu.com/2022/12/29/2022-year-summary/></a></article><article class=post-entry><header class=entry-header><h2>使用 headscale 异地组网</h2></header><div class=entry-content><p>很久之前看过柠檬大佬的使用 N2N 进行异地组网的文章，大受震撼，但是 N2N 的部署体验很难说得上令人愉悦。
然后就听说了 wireguard 被加入 linux 内核，以下是 wireguard 的介绍：
WireGuard是由Jason A. Donenfeld开发的开放源代码VPN程序及协议[1]，基于Linux内核实现，利用Curve25519进行密钥交换，ChaCha20用于加密，Poly1305用于数据认证，BLAKE2用于散列函数运算[1]，支持IPv4和IPv6的第3层。[2]WireGuard旨在获得比IPsec和OpenVPN更好的性能[3]。
确实，wireguard 性能十分不错，但是配置实在是过于繁琐了，如果要往 wireguard 网络中加入一台设备，则需要修改几乎所有连入网络设备的配置文件，实在是太麻烦了，好在现在已经有了 tailscale 这个服务提供商提供了基于 wireguard 的 0 配置的 VPN 组网方案。
而 headscale 就是 tailscale 中控服务端的开源版本，开源版本支持自己部署，同时没有连入设备的数量限制，于是我花了一点时间将 headscale 部署了一下。
使用到的项目 Github:juanfont/headscale Github:gurucomputing/headscale-ui
部署 headscale 这里我使用 docker-componse 进行部署
version: '3.5' services: headscale: image: headscale/headscale:latest-alpine container_name: headscale volumes: - ./container-config:/etc/headscale - ./container-data/data:/var/lib/headscale ports: - 27896:8080 command: headscale serve restart: unless-stopped headscale-ui: image: ghcr.io/gurucomputing/headscale-ui:latest restart: unless-stopped container_name: headscale-ui ports: - 9443:443 同时我还使用了nginx来进行反向代理，将 headscale-ui 和 headscale 分别部署在了不同的域名下面，因此要做一些 CORS 的处理，Nginx 配置文件参考如下
...</p></div><footer class=entry-footer><span title='2022-11-04 10:00:00 +0800 CST'>2022-11-04 10:00:00</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;269 words&nbsp;·&nbsp;johnpoint</footer><a class=entry-link aria-label="post link to 使用 headscale 异地组网" href=https://blog.lvcshu.com/2022/11/04/deploy-headscale/></a></article><article class=post-entry><header class=entry-header><h2>使用 ssh 密钥签名 git commit</h2></header><div class=entry-content><p>在 Github commit添加verified标识 这篇文章中，配置好了 gpg 密钥签名作为标识 git commit 是否值得信任带凭证，但是载后面使用签名的过程中渐渐感到了一丝丝的麻烦，因为 gpg 密钥在我日常的生活中并没有很多其他的用处。最近 github 支持了显示通过 ssh 密钥签名的 commit 的功能。ssh 密钥在日常用起来要比 gpg 密钥要多得多，所以配置了一下，顺便写个文章记录操作流程。
git config --global gpg.format ssh git config --global user.signingKey ~/.ssh/id_ed25519.pub git config --global commit.gpgsign true git config --global tag.gpgsign true 一般来说，配置好了这几个选项，就可以顺利的把签名加上了，要是 git commit 的时候提示你 ssh是不支持的格式 那么就意味着当前版本的 git 并不支持通过 ssh 密钥签名 commit，这时候就要自己更新下系统上面的 git 了。</p></div><footer class=entry-footer><span title='2022-10-05 21:30:37 +0800 CST'>2022-10-05 21:30:37</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;53 words&nbsp;·&nbsp;johnpoint</footer><a class=entry-link aria-label="post link to 使用 ssh 密钥签名 git commit" href=https://blog.lvcshu.com/2022/10/05/git-commit-sign-by-ssh-key/></a></article><article class=post-entry><header class=entry-header><h2>使用 docker-compose 搭建 clickhouse 集群</h2></header><div class=entry-content><p>Docker Compose 配置 version: '3' services: clickhouse-server-ck1: restart: on-failure:10 # 退出非0重启，尝试10次 image: yandex/clickhouse-server container_name: ck1 networks: - ck-network ports: - "8124:8123" - "9001:9000" - "9010:9004" volumes: - `pwd`/clickhouse/:/var/lib/clickhouse/ - `pwd`/clickhouse-server/:/etc/clickhouse-server/ - `pwd`/log/clickhouse-server/:/var/log/clickhouse-server/ ulimits: nofile: soft: "262144" hard: "262144" depends_on: - zookeeper-1 clickhouse-server-ck2: restart: on-failure:10 # 退出非0重启，尝试10次 image: yandex/clickhouse-server container_name: ck2 networks: - ck-network ports: - "8125:8123" - "9002:9000" - "9011:9004" volumes: - `pwd`/clickhouse2/:/var/lib/clickhouse/ - `pwd`/clickhouse-server2/:/etc/clickhouse-server/ - `pwd`/log/clickhouse-server2/:/var/log/clickhouse-server/ ulimits: nofile: soft: "262144" hard: "262144" depends_on: - zookeeper-1 clickhouse-server-ck3: restart: on-failure:10 # 退出非0重启，尝试10次 image: yandex/clickhouse-server container_name: ck3 networks: - ck-network ports: - "8126:8123" - "9003:9000" - "9012:9004" volumes: - `pwd`/clickhouse3/:/var/lib/clickhouse/ - `pwd`/clickhouse-server3/:/etc/clickhouse-server/ - `pwd`/log/clickhouse-server3/:/var/log/clickhouse-server/ ulimits: nofile: soft: "262144" hard: "262144" depends_on: - zookeeper-1 zookeeper-1: restart: on-failure:10 # 退出非0重启，尝试10次 image: zookeeper:3.8.0 container_name: zookeeper1 networks: - ck-network ports: - "2181:2181" volumes: - `pwd`/zookeeper/conf/:/apache-zookeeper-3.8.0-bin/conf/ - `pwd`/zookeeper/data/:/data - `pwd`/zookeeper/datalog/:/datalog - `pwd`/zookeeper/logs/:/logs ulimits: nofile: soft: "262144" hard: "262144" networks: ck-network: Clickhouse 配置文件 &lt;?xml version="1.0"?> &lt;!-- NOTE: User and query level settings are set up in "users.xml" file. If you have accidentally specified user-level settings here, server won't start. You can either move the settings to the right place inside "users.xml" file or add &lt;skip_check_for_incorrect_settings>1&lt;/skip_check_for_incorrect_settings> here. --> &lt;clickhouse> &lt;logger> &lt;!-- Possible levels [1]: - none (turns off logging) - fatal - critical - error - warning - notice - information - debug - trace - test (not for production usage) [1]: https://github.com/pocoproject/poco/blob/poco-1.9.4-release/Foundation/include/Poco/Logger.h#L105-L114 --> &lt;level>trace&lt;/level> &lt;log>/var/log/clickhouse-server/clickhouse-server.log&lt;/log> &lt;errorlog>/var/log/clickhouse-server/clickhouse-server.err.log&lt;/errorlog> &lt;!-- Rotation policy See https://github.com/pocoproject/poco/blob/poco-1.9.4-release/Foundation/include/Poco/FileChannel.h#L54-L85 --> &lt;size>1000M&lt;/size> &lt;count>10&lt;/count> &lt;!-- &lt;console>1&lt;/console> --> &lt;!-- Default behavior is autodetection (log to console if not daemon mode and is tty) --> &lt;!-- Per level overrides (legacy): For example to suppress logging of the ConfigReloader you can use: NOTE: levels.logger is reserved, see below. --> &lt;!-- &lt;levels> &lt;ConfigReloader>none&lt;/ConfigReloader> &lt;/levels> --> &lt;!-- Per level overrides: For example to suppress logging of the RBAC for default user you can use: (But please note that the logger name maybe changed from version to version, even after minor upgrade) --> &lt;!-- &lt;levels> &lt;logger> &lt;name>ContextAccess (default)&lt;/name> &lt;level>none&lt;/level> &lt;/logger> &lt;logger> &lt;name>DatabaseOrdinary (test)&lt;/name> &lt;level>none&lt;/level> &lt;/logger> &lt;/levels> --> &lt;/logger> &lt;!-- Add headers to response in options request. OPTIONS method is used in CORS preflight requests. --> &lt;!-- It is off by default. Next headers are obligate for CORS.--> &lt;!-- http_options_response> &lt;header> &lt;name>Access-Control-Allow-Origin&lt;/name> &lt;value>*&lt;/value> &lt;/header> &lt;header> &lt;name>Access-Control-Allow-Headers&lt;/name> &lt;value>origin, x-requested-with&lt;/value> &lt;/header> &lt;header> &lt;name>Access-Control-Allow-Methods&lt;/name> &lt;value>POST, GET, OPTIONS&lt;/value> &lt;/header> &lt;header> &lt;name>Access-Control-Max-Age&lt;/name> &lt;value>86400&lt;/value> &lt;/header> &lt;/http_options_response --> &lt;!-- It is the name that will be shown in the clickhouse-client. By default, anything with "production" will be highlighted in red in query prompt. --> &lt;!--display_name>production&lt;/display_name--> &lt;!-- Port for HTTP API. See also 'https_port' for secure connections. This interface is also used by ODBC and JDBC drivers (DataGrip, Dbeaver, ...) and by most of web interfaces (embedded UI, Grafana, Redash, ...). --> &lt;http_port>8123&lt;/http_port> &lt;!-- Port for interaction by native protocol with: - clickhouse-client and other native ClickHouse tools (clickhouse-benchmark, clickhouse-copier); - clickhouse-server with other clickhouse-servers for distributed query processing; - ClickHouse drivers and applications supporting native protocol (this protocol is also informally called as "the TCP protocol"); See also 'tcp_port_secure' for secure connections. --> &lt;tcp_port>9000&lt;/tcp_port> &lt;!-- Compatibility with MySQL protocol. ClickHouse will pretend to be MySQL for applications connecting to this port. --> &lt;mysql_port>9004&lt;/mysql_port> &lt;!-- Compatibility with PostgreSQL protocol. ClickHouse will pretend to be PostgreSQL for applications connecting to this port. --> &lt;postgresql_port>9005&lt;/postgresql_port> &lt;!-- HTTP API with TLS (HTTPS). You have to configure certificate to enable this interface. See the openSSL section below. --> &lt;!-- &lt;https_port>8443&lt;/https_port> --> &lt;!-- Native interface with TLS. You have to configure certificate to enable this interface. See the openSSL section below. --> &lt;!-- &lt;tcp_port_secure>9440&lt;/tcp_port_secure> --> &lt;!-- Native interface wrapped with PROXYv1 protocol PROXYv1 header sent for every connection. ClickHouse will extract information about proxy-forwarded client address from the header. --> &lt;!-- &lt;tcp_with_proxy_port>9011&lt;/tcp_with_proxy_port> --> &lt;!-- Port for communication between replicas. Used for data exchange. It provides low-level data access between servers. This port should not be accessible from untrusted networks. See also 'interserver_http_credentials'. Data transferred over connections to this port should not go through untrusted networks. See also 'interserver_https_port'. --> &lt;interserver_http_port>9009&lt;/interserver_http_port> &lt;!-- Port for communication between replicas with TLS. You have to configure certificate to enable this interface. See the openSSL section below. See also 'interserver_http_credentials'. --> &lt;!-- &lt;interserver_https_port>9010&lt;/interserver_https_port> --> &lt;!-- Hostname that is used by other replicas to request this server. If not specified, than it is determined analogous to 'hostname -f' command. This setting could be used to switch replication to another network interface (the server may be connected to multiple networks via multiple addresses) --> &lt;interserver_http_host>0.0.0.0&lt;/interserver_http_host> &lt;!-- You can specify credentials for authenthication between replicas. This is required when interserver_https_port is accessible from untrusted networks, and also recommended to avoid SSRF attacks from possibly compromised services in your network. --> &lt;!--&lt;interserver_http_credentials> &lt;user>interserver&lt;/user> &lt;password>&lt;/password> &lt;/interserver_http_credentials>--> &lt;!-- Listen specified address. Use :: (wildcard IPv6 address), if you want to accept connections both with IPv4 and IPv6 from everywhere. Notes: If you open connections from wildcard address, make sure that at least one of the following measures applied: - server is protected by firewall and not accessible from untrusted networks; - all users are restricted to subset of network addresses (see users.xml); - all users have strong passwords, only secure (TLS) interfaces are accessible, or connections are only made via TLS interfaces. - users without password have readonly access. See also: https://www.shodan.io/search?query=clickhouse --> &lt;!-- &lt;listen_host>::&lt;/listen_host> --> &lt;!-- Same for hosts without support for IPv6: --> &lt;listen_host>0.0.0.0&lt;/listen_host> &lt;!-- Default values - try listen localhost on IPv4 and IPv6. --> &lt;!-- &lt;listen_host>::1&lt;/listen_host> &lt;listen_host>127.0.0.1&lt;/listen_host> --> &lt;!-- Don't exit if IPv6 or IPv4 networks are unavailable while trying to listen. --> &lt;!-- &lt;listen_try>0&lt;/listen_try> --> &lt;!-- Allow multiple servers to listen on the same address:port. This is not recommended. --> &lt;!-- &lt;listen_reuse_port>0&lt;/listen_reuse_port> --> &lt;!-- &lt;listen_backlog>4096&lt;/listen_backlog> --> &lt;max_connections>4096&lt;/max_connections> &lt;!-- For 'Connection: keep-alive' in HTTP 1.1 --> &lt;keep_alive_timeout>3&lt;/keep_alive_timeout> &lt;!-- gRPC protocol (see src/Server/grpc_protos/clickhouse_grpc.proto for the API) --> &lt;!-- &lt;grpc_port>9100&lt;/grpc_port> --> &lt;grpc> &lt;enable_ssl>false&lt;/enable_ssl> &lt;!-- The following two files are used only if enable_ssl=1 --> &lt;ssl_cert_file>/path/to/ssl_cert_file&lt;/ssl_cert_file> &lt;ssl_key_file>/path/to/ssl_key_file&lt;/ssl_key_file> &lt;!-- Whether server will request client for a certificate --> &lt;ssl_require_client_auth>false&lt;/ssl_require_client_auth> &lt;!-- The following file is used only if ssl_require_client_auth=1 --> &lt;ssl_ca_cert_file>/path/to/ssl_ca_cert_file&lt;/ssl_ca_cert_file> &lt;!-- Default compression algorithm (applied if client doesn't specify another algorithm, see result_compression in QueryInfo). Supported algorithms: none, deflate, gzip, stream_gzip --> &lt;compression>deflate&lt;/compression> &lt;!-- Default compression level (applied if client doesn't specify another level, see result_compression in QueryInfo). Supported levels: none, low, medium, high --> &lt;compression_level>medium&lt;/compression_level> &lt;!-- Send/receive message size limits in bytes. -1 means unlimited --> &lt;max_send_message_size>-1&lt;/max_send_message_size> &lt;max_receive_message_size>-1&lt;/max_receive_message_size> &lt;!-- Enable if you want very detailed logs --> &lt;verbose_logs>false&lt;/verbose_logs> &lt;/grpc> &lt;!-- Used with https_port and tcp_port_secure. Full ssl options list: https://github.com/ClickHouse-Extras/poco/blob/master/NetSSL_OpenSSL/include/Poco/Net/SSLManager.h#L71 --> &lt;openSSL> &lt;server> &lt;!-- Used for https server AND secure tcp port --> &lt;!-- openssl req -subj "/CN=localhost" -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout /etc/clickhouse-server/server.key -out /etc/clickhouse-server/server.crt --> &lt;certificateFile>/etc/clickhouse-server/server.crt&lt;/certificateFile> &lt;privateKeyFile>/etc/clickhouse-server/server.key&lt;/privateKeyFile> &lt;!-- dhparams are optional. You can delete the &lt;dhParamsFile> element. To generate dhparams, use the following command: openssl dhparam -out /etc/clickhouse-server/dhparam.pem 4096 Only file format with BEGIN DH PARAMETERS is supported. --> &lt;dhParamsFile>/etc/clickhouse-server/dhparam.pem&lt;/dhParamsFile> &lt;verificationMode>none&lt;/verificationMode> &lt;loadDefaultCAFile>true&lt;/loadDefaultCAFile> &lt;cacheSessions>true&lt;/cacheSessions> &lt;disableProtocols>sslv2,sslv3&lt;/disableProtocols> &lt;preferServerCiphers>true&lt;/preferServerCiphers> &lt;/server> &lt;client> &lt;!-- Used for connecting to https dictionary source and secured Zookeeper communication --> &lt;loadDefaultCAFile>true&lt;/loadDefaultCAFile> &lt;cacheSessions>true&lt;/cacheSessions> &lt;disableProtocols>sslv2,sslv3&lt;/disableProtocols> &lt;preferServerCiphers>true&lt;/preferServerCiphers> &lt;!-- Use for self-signed: &lt;verificationMode>none&lt;/verificationMode> --> &lt;invalidCertificateHandler> &lt;!-- Use for self-signed: &lt;name>AcceptCertificateHandler&lt;/name> --> &lt;name>RejectCertificateHandler&lt;/name> &lt;/invalidCertificateHandler> &lt;/client> &lt;/openSSL> &lt;!-- Default root page on http[s] server. For example load UI from https://tabix.io/ when opening http://localhost:8123 --> &lt;!-- &lt;http_server_default_response>&lt;![CDATA[&lt;html ng-app="SMI2">&lt;head>&lt;base href="http://ui.tabix.io/">&lt;/head>&lt;body>&lt;div ui-view="" class="content-ui">&lt;/div>&lt;script src="http://loader.tabix.io/master.js">&lt;/script>&lt;/body>&lt;/html>]]>&lt;/http_server_default_response> --> &lt;!-- Maximum number of concurrent queries. --> &lt;max_concurrent_queries>100&lt;/max_concurrent_queries> &lt;!-- Maximum memory usage (resident set size) for server process. Zero value or unset means default. Default is "max_server_memory_usage_to_ram_ratio" of available physical RAM. If the value is larger than "max_server_memory_usage_to_ram_ratio" of available physical RAM, it will be cut down. The constraint is checked on query execution time. If a query tries to allocate memory and the current memory usage plus allocation is greater than specified threshold, exception will be thrown. It is not practical to set this constraint to small values like just a few gigabytes, because memory allocator will keep this amount of memory in caches and the server will deny service of queries. --> &lt;max_server_memory_usage>0&lt;/max_server_memory_usage> &lt;!-- Maximum number of threads in the Global thread pool. This will default to a maximum of 10000 threads if not specified. This setting will be useful in scenarios where there are a large number of distributed queries that are running concurrently but are idling most of the time, in which case a higher number of threads might be required. --> &lt;max_thread_pool_size>10000&lt;/max_thread_pool_size> &lt;!-- Number of workers to recycle connections in background (see also drain_timeout). If the pool is full, connection will be drained synchronously. --> &lt;!-- &lt;max_threads_for_connection_collector>10&lt;/max_threads_for_connection_collector> --> &lt;!-- On memory constrained environments you may have to set this to value larger than 1. --> &lt;max_server_memory_usage_to_ram_ratio>0.9&lt;/max_server_memory_usage_to_ram_ratio> &lt;!-- Simple server-wide memory profiler. Collect a stack trace at every peak allocation step (in bytes). Data will be stored in system.trace_log table with query_id = empty string. Zero means disabled. --> &lt;total_memory_profiler_step>4194304&lt;/total_memory_profiler_step> &lt;!-- Collect random allocations and deallocations and write them into system.trace_log with 'MemorySample' trace_type. The probability is for every alloc/free regardless to the size of the allocation. Note that sampling happens only when the amount of untracked memory exceeds the untracked memory limit, which is 4 MiB by default but can be lowered if 'total_memory_profiler_step' is lowered. You may want to set 'total_memory_profiler_step' to 1 for extra fine grained sampling. --> &lt;total_memory_tracker_sample_probability>0&lt;/total_memory_tracker_sample_probability> &lt;!-- Set limit on number of open files (default: maximum). This setting makes sense on Mac OS X because getrlimit() fails to retrieve correct maximum value. --> &lt;!-- &lt;max_open_files>262144&lt;/max_open_files> --> &lt;!-- Size of cache of uncompressed blocks of data, used in tables of MergeTree family. In bytes. Cache is single for server. Memory is allocated only on demand. Cache is used when 'use_uncompressed_cache' user setting turned on (off by default). Uncompressed cache is advantageous only for very short queries and in rare cases. Note: uncompressed cache can be pointless for lz4, because memory bandwidth is slower than multi-core decompression on some server configurations. Enabling it can sometimes paradoxically make queries slower. --> &lt;uncompressed_cache_size>8589934592&lt;/uncompressed_cache_size> &lt;!-- Approximate size of mark cache, used in tables of MergeTree family. In bytes. Cache is single for server. Memory is allocated only on demand. You should not lower this value. --> &lt;mark_cache_size>5368709120&lt;/mark_cache_size> &lt;!-- If you enable the `min_bytes_to_use_mmap_io` setting, the data in MergeTree tables can be read with mmap to avoid copying from kernel to userspace. It makes sense only for large files and helps only if data reside in page cache. To avoid frequent open/mmap/munmap/close calls (which are very expensive due to consequent page faults) and to reuse mappings from several threads and queries, the cache of mapped files is maintained. Its size is the number of mapped regions (usually equal to the number of mapped files). The amount of data in mapped files can be monitored in system.metrics, system.metric_log by the MMappedFiles, MMappedFileBytes metrics and in system.asynchronous_metrics, system.asynchronous_metrics_log by the MMapCacheCells metric, and also in system.events, system.processes, system.query_log, system.query_thread_log, system.query_views_log by the CreatedReadBufferMMap, CreatedReadBufferMMapFailed, MMappedFileCacheHits, MMappedFileCacheMisses events. Note that the amount of data in mapped files does not consume memory directly and is not accounted in query or server memory usage - because this memory can be discarded similar to OS page cache. The cache is dropped (the files are closed) automatically on removal of old parts in MergeTree, also it can be dropped manually by the SYSTEM DROP MMAP CACHE query. --> &lt;mmap_cache_size>1000&lt;/mmap_cache_size> &lt;!-- Cache size in bytes for compiled expressions.--> &lt;compiled_expression_cache_size>134217728&lt;/compiled_expression_cache_size> &lt;!-- Cache size in elements for compiled expressions.--> &lt;compiled_expression_cache_elements_size>10000&lt;/compiled_expression_cache_elements_size> &lt;!-- Path to data directory, with trailing slash. --> &lt;path>/var/lib/clickhouse/&lt;/path> &lt;!-- Path to temporary data for processing hard queries. --> &lt;tmp_path>/var/lib/clickhouse/tmp/&lt;/tmp_path> &lt;!-- Policy from the &lt;storage_configuration> for the temporary files. If not set &lt;tmp_path> is used, otherwise &lt;tmp_path> is ignored. Notes: - move_factor is ignored - keep_free_space_bytes is ignored - max_data_part_size_bytes is ignored - you must have exactly one volume in that policy --> &lt;!-- &lt;tmp_policy>tmp&lt;/tmp_policy> --> &lt;!-- Directory with user provided files that are accessible by 'file' table function. --> &lt;user_files_path>/var/lib/clickhouse/user_files/&lt;/user_files_path> &lt;!-- LDAP server definitions. --> &lt;ldap_servers> &lt;!-- List LDAP servers with their connection parameters here to later 1) use them as authenticators for dedicated local users, who have 'ldap' authentication mechanism specified instead of 'password', or to 2) use them as remote user directories. Parameters: host - LDAP server hostname or IP, this parameter is mandatory and cannot be empty. port - LDAP server port, default is 636 if enable_tls is set to true, 389 otherwise. bind_dn - template used to construct the DN to bind to. The resulting DN will be constructed by replacing all '{user_name}' substrings of the template with the actual user name during each authentication attempt. user_dn_detection - section with LDAP search parameters for detecting the actual user DN of the bound user. This is mainly used in search filters for further role mapping when the server is Active Directory. The resulting user DN will be used when replacing '{user_dn}' substrings wherever they are allowed. By default, user DN is set equal to bind DN, but once search is performed, it will be updated with to the actual detected user DN value. base_dn - template used to construct the base DN for the LDAP search. The resulting DN will be constructed by replacing all '{user_name}' and '{bind_dn}' substrings of the template with the actual user name and bind DN during the LDAP search. scope - scope of the LDAP search. Accepted values are: 'base', 'one_level', 'children', 'subtree' (the default). search_filter - template used to construct the search filter for the LDAP search. The resulting filter will be constructed by replacing all '{user_name}', '{bind_dn}', and '{base_dn}' substrings of the template with the actual user name, bind DN, and base DN during the LDAP search. Note, that the special characters must be escaped properly in XML. verification_cooldown - a period of time, in seconds, after a successful bind attempt, during which a user will be assumed to be successfully authenticated for all consecutive requests without contacting the LDAP server. Specify 0 (the default) to disable caching and force contacting the LDAP server for each authentication request. enable_tls - flag to trigger use of secure connection to the LDAP server. Specify 'no' for plain text (ldap://) protocol (not recommended). Specify 'yes' for LDAP over SSL/TLS (ldaps://) protocol (recommended, the default). Specify 'starttls' for legacy StartTLS protocol (plain text (ldap://) protocol, upgraded to TLS). tls_minimum_protocol_version - the minimum protocol version of SSL/TLS. Accepted values are: 'ssl2', 'ssl3', 'tls1.0', 'tls1.1', 'tls1.2' (the default). tls_require_cert - SSL/TLS peer certificate verification behavior. Accepted values are: 'never', 'allow', 'try', 'demand' (the default). tls_cert_file - path to certificate file. tls_key_file - path to certificate key file. tls_ca_cert_file - path to CA certificate file. tls_ca_cert_dir - path to the directory containing CA certificates. tls_cipher_suite - allowed cipher suite (in OpenSSL notation). Example: &lt;my_ldap_server> &lt;host>localhost&lt;/host> &lt;port>636&lt;/port> &lt;bind_dn>uid={user_name},ou=users,dc=example,dc=com&lt;/bind_dn> &lt;verification_cooldown>300&lt;/verification_cooldown> &lt;enable_tls>yes&lt;/enable_tls> &lt;tls_minimum_protocol_version>tls1.2&lt;/tls_minimum_protocol_version> &lt;tls_require_cert>demand&lt;/tls_require_cert> &lt;tls_cert_file>/path/to/tls_cert_file&lt;/tls_cert_file> &lt;tls_key_file>/path/to/tls_key_file&lt;/tls_key_file> &lt;tls_ca_cert_file>/path/to/tls_ca_cert_file&lt;/tls_ca_cert_file> &lt;tls_ca_cert_dir>/path/to/tls_ca_cert_dir&lt;/tls_ca_cert_dir> &lt;tls_cipher_suite>ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:AES256-GCM-SHA384&lt;/tls_cipher_suite> &lt;/my_ldap_server> Example (typical Active Directory with configured user DN detection for further role mapping): &lt;my_ad_server> &lt;host>localhost&lt;/host> &lt;port>389&lt;/port> &lt;bind_dn>EXAMPLE\{user_name}&lt;/bind_dn> &lt;user_dn_detection> &lt;base_dn>CN=Users,DC=example,DC=com&lt;/base_dn> &lt;search_filter>(&amp;amp;(objectClass=user)(sAMAccountName={user_name}))&lt;/search_filter> &lt;/user_dn_detection> &lt;enable_tls>no&lt;/enable_tls> &lt;/my_ad_server> --> &lt;/ldap_servers> &lt;!-- To enable Kerberos authentication support for HTTP requests (GSS-SPNEGO), for those users who are explicitly configured to authenticate via Kerberos, define a single 'kerberos' section here. Parameters: principal - canonical service principal name, that will be acquired and used when accepting security contexts. This parameter is optional, if omitted, the default principal will be used. This parameter cannot be specified together with 'realm' parameter. realm - a realm, that will be used to restrict authentication to only those requests whose initiator's realm matches it. This parameter is optional, if omitted, no additional filtering by realm will be applied. This parameter cannot be specified together with 'principal' parameter. Example: &lt;kerberos /> Example: &lt;kerberos> &lt;principal>HTTP/clickhouse.example.com@EXAMPLE.COM&lt;/principal> &lt;/kerberos> Example: &lt;kerberos> &lt;realm>EXAMPLE.COM&lt;/realm> &lt;/kerberos> --> &lt;!-- Sources to read users, roles, access rights, profiles of settings, quotas. --> &lt;user_directories> &lt;users_xml> &lt;!-- Path to configuration file with predefined users. --> &lt;path>users.xml&lt;/path> &lt;/users_xml> &lt;local_directory> &lt;!-- Path to folder where users created by SQL commands are stored. --> &lt;path>/var/lib/clickhouse/access/&lt;/path> &lt;/local_directory> &lt;!-- To add an LDAP server as a remote user directory of users that are not defined locally, define a single 'ldap' section with the following parameters: server - one of LDAP server names defined in 'ldap_servers' config section above. This parameter is mandatory and cannot be empty. roles - section with a list of locally defined roles that will be assigned to each user retrieved from the LDAP server. If no roles are specified here or assigned during role mapping (below), user will not be able to perform any actions after authentication. role_mapping - section with LDAP search parameters and mapping rules. When a user authenticates, while still bound to LDAP, an LDAP search is performed using search_filter and the name of the logged in user. For each entry found during that search, the value of the specified attribute is extracted. For each attribute value that has the specified prefix, the prefix is removed, and the rest of the value becomes the name of a local role defined in ClickHouse, which is expected to be created beforehand by CREATE ROLE command. There can be multiple 'role_mapping' sections defined inside the same 'ldap' section. All of them will be applied. base_dn - template used to construct the base DN for the LDAP search. The resulting DN will be constructed by replacing all '{user_name}', '{bind_dn}', and '{user_dn}' substrings of the template with the actual user name, bind DN, and user DN during each LDAP search. scope - scope of the LDAP search. Accepted values are: 'base', 'one_level', 'children', 'subtree' (the default). search_filter - template used to construct the search filter for the LDAP search. The resulting filter will be constructed by replacing all '{user_name}', '{bind_dn}', '{user_dn}', and '{base_dn}' substrings of the template with the actual user name, bind DN, user DN, and base DN during each LDAP search. Note, that the special characters must be escaped properly in XML. attribute - attribute name whose values will be returned by the LDAP search. 'cn', by default. prefix - prefix, that will be expected to be in front of each string in the original list of strings returned by the LDAP search. Prefix will be removed from the original strings and resulting strings will be treated as local role names. Empty, by default. Example: &lt;ldap> &lt;server>my_ldap_server&lt;/server> &lt;roles> &lt;my_local_role1 /> &lt;my_local_role2 /> &lt;/roles> &lt;role_mapping> &lt;base_dn>ou=groups,dc=example,dc=com&lt;/base_dn> &lt;scope>subtree&lt;/scope> &lt;search_filter>(&amp;amp;(objectClass=groupOfNames)(member={bind_dn}))&lt;/search_filter> &lt;attribute>cn&lt;/attribute> &lt;prefix>clickhouse_&lt;/prefix> &lt;/role_mapping> &lt;/ldap> Example (typical Active Directory with role mapping that relies on the detected user DN): &lt;ldap> &lt;server>my_ad_server&lt;/server> &lt;role_mapping> &lt;base_dn>CN=Users,DC=example,DC=com&lt;/base_dn> &lt;attribute>CN&lt;/attribute> &lt;scope>subtree&lt;/scope> &lt;search_filter>(&amp;amp;(objectClass=group)(member={user_dn}))&lt;/search_filter> &lt;prefix>clickhouse_&lt;/prefix> &lt;/role_mapping> &lt;/ldap> --> &lt;/user_directories> &lt;!-- Default profile of settings. --> &lt;default_profile>default&lt;/default_profile> &lt;!-- Comma-separated list of prefixes for user-defined settings. --> &lt;custom_settings_prefixes>&lt;/custom_settings_prefixes> &lt;!-- System profile of settings. This settings are used by internal processes (Distributed DDL worker and so on). --> &lt;!-- &lt;system_profile>default&lt;/system_profile> --> &lt;!-- Buffer profile of settings. This settings are used by Buffer storage to flush data to the underlying table. Default: used from system_profile directive. --> &lt;!-- &lt;buffer_profile>default&lt;/buffer_profile> --> &lt;!-- Default database. --> &lt;default_database>default&lt;/default_database> &lt;!-- Server time zone could be set here. Time zone is used when converting between String and DateTime types, when printing DateTime in text formats and parsing DateTime from text, it is used in date and time related functions, if specific time zone was not passed as an argument. Time zone is specified as identifier from IANA time zone database, like UTC or Africa/Abidjan. If not specified, system time zone at server startup is used. Please note, that server could display time zone alias instead of specified name. Example: W-SU is an alias for Europe/Moscow and Zulu is an alias for UTC. --> &lt;!-- &lt;timezone>Europe/Moscow&lt;/timezone> --> &lt;!-- You can specify umask here (see "man umask"). Server will apply it on startup. Number is always parsed as octal. Default umask is 027 (other users cannot read logs, data files, etc; group can only read). --> &lt;!-- &lt;umask>022&lt;/umask> --> &lt;!-- Perform mlockall after startup to lower first queries latency and to prevent clickhouse executable from being paged out under high IO load. Enabling this option is recommended but will lead to increased startup time for up to a few seconds. --> &lt;mlock_executable>true&lt;/mlock_executable> &lt;!-- Reallocate memory for machine code ("text") using huge pages. Highly experimental. --> &lt;remap_executable>false&lt;/remap_executable> &lt;![CDATA[ Uncomment below in order to use JDBC table engine and function. To install and run JDBC bridge in background: * [Debian/Ubuntu] export MVN_URL=https://repo1.maven.org/maven2/ru/yandex/clickhouse/clickhouse-jdbc-bridge export PKG_VER=$(curl -sL $MVN_URL/maven-metadata.xml | grep '&lt;release>' | sed -e 's|.*>\(.*\)&lt;.*|\1|') wget https://github.com/ClickHouse/clickhouse-jdbc-bridge/releases/download/v$PKG_VER/clickhouse-jdbc-bridge_$PKG_VER-1_all.deb apt install --no-install-recommends -f ./clickhouse-jdbc-bridge_$PKG_VER-1_all.deb clickhouse-jdbc-bridge & * [CentOS/RHEL] export MVN_URL=https://repo1.maven.org/maven2/ru/yandex/clickhouse/clickhouse-jdbc-bridge export PKG_VER=$(curl -sL $MVN_URL/maven-metadata.xml | grep '&lt;release>' | sed -e 's|.*>\(.*\)&lt;.*|\1|') wget https://github.com/ClickHouse/clickhouse-jdbc-bridge/releases/download/v$PKG_VER/clickhouse-jdbc-bridge-$PKG_VER-1.noarch.rpm yum localinstall -y clickhouse-jdbc-bridge-$PKG_VER-1.noarch.rpm clickhouse-jdbc-bridge & Please refer to https://github.com/ClickHouse/clickhouse-jdbc-bridge#usage for more information. ]]> &lt;!-- &lt;jdbc_bridge> &lt;host>127.0.0.1&lt;/host> &lt;port>9019&lt;/port> &lt;/jdbc_bridge> --> &lt;!-- Configuration of clusters that could be used in Distributed tables. https://clickhouse.com/docs/en/operations/table_engines/distributed/ --> &lt;remote_servers> &lt;default_cluster> &lt;shard> &lt;weight>1&lt;/weight> &lt;internal_replication>false&lt;/internal_replication> &lt;replica> &lt;host>ck1&lt;/host> &lt;port>9000&lt;/port> &lt;/replica> &lt;/shard> &lt;shard> &lt;weight>1&lt;/weight> &lt;internal_replication>false&lt;/internal_replication> &lt;replica> &lt;host>ck2&lt;/host> &lt;port>9000&lt;/port> &lt;/replica> &lt;/shard> &lt;shard> &lt;weight>1&lt;/weight> &lt;internal_replication>false&lt;/internal_replication> &lt;replica> &lt;host>ck3&lt;/host> &lt;port>9000&lt;/port> &lt;/replica> &lt;/shard> &lt;/default_cluster> &lt;/remote_servers> &lt;macros> &lt;replica>ck1&lt;/replica> &lt;shard>01&lt;/shard> &lt;layer>01&lt;/layer> &lt;/macros> &lt;!-- The list of hosts allowed to use in URL-related storage engines and table functions. If this section is not present in configuration, all hosts are allowed. --> &lt;!--&lt;remote_url_allow_hosts>--> &lt;!-- Host should be specified exactly as in URL. The name is checked before DNS resolution. Example: "yandex.ru", "yandex.ru." and "www.yandex.ru" are different hosts. If port is explicitly specified in URL, the host:port is checked as a whole. If host specified here without port, any port with this host allowed. "yandex.ru" -> "yandex.ru:443", "yandex.ru:80" etc. is allowed, but "yandex.ru:80" -> only "yandex.ru:80" is allowed. If the host is specified as IP address, it is checked as specified in URL. Example: "[2a02:6b8:a::a]". If there are redirects and support for redirects is enabled, every redirect (the Location field) is checked. Host should be specified using the host xml tag: &lt;host>yandex.ru&lt;/host> --> &lt;!-- Regular expression can be specified. RE2 engine is used for regexps. Regexps are not aligned: don't forget to add ^ and $. Also don't forget to escape dot (.) metacharacter (forgetting to do so is a common source of error). --> &lt;!--&lt;/remote_url_allow_hosts>--> &lt;!-- If element has 'incl' attribute, then for it's value will be used corresponding substitution from another file. By default, path to file with substitutions is /etc/metrika.xml. It could be changed in config in 'include_from' element. Values for substitutions are specified in /clickhouse/name_of_substitution elements in that file. --> &lt;!-- ZooKeeper is used to store metadata about replicas, when using Replicated tables. Optional. If you don't use replicated tables, you could omit that. See https://clickhouse.com/docs/en/engines/table-engines/mergetree-family/replication/ --> &lt;zookeeper> &lt;node> &lt;host>zookeeper1&lt;/host> &lt;port>2181&lt;/port> &lt;/node> &lt;/zookeeper> &lt;!-- Substitutions for parameters of replicated tables. Optional. If you don't use replicated tables, you could omit that. See https://clickhouse.com/docs/en/engines/table-engines/mergetree-family/replication/#creating-replicated-tables --> &lt;!-- &lt;macros> &lt;shard>01&lt;/shard> &lt;replica>example01-01-1&lt;/replica> &lt;/macros> --> &lt;!-- Reloading interval for embedded dictionaries, in seconds. Default: 3600. --> &lt;builtin_dictionaries_reload_interval>3600&lt;/builtin_dictionaries_reload_interval> &lt;!-- Maximum session timeout, in seconds. Default: 3600. --> &lt;max_session_timeout>3600&lt;/max_session_timeout> &lt;!-- Default session timeout, in seconds. Default: 60. --> &lt;default_session_timeout>60&lt;/default_session_timeout> &lt;!-- Sending data to Graphite for monitoring. Several sections can be defined. --> &lt;!-- interval - send every X second root_path - prefix for keys hostname_in_path - append hostname to root_path (default = true) metrics - send data from table system.metrics events - send data from table system.events asynchronous_metrics - send data from table system.asynchronous_metrics --> &lt;!-- &lt;graphite> &lt;host>localhost&lt;/host> &lt;port>42000&lt;/port> &lt;timeout>0.1&lt;/timeout> &lt;interval>60&lt;/interval> &lt;root_path>one_min&lt;/root_path> &lt;hostname_in_path>true&lt;/hostname_in_path> &lt;metrics>true&lt;/metrics> &lt;events>true&lt;/events> &lt;events_cumulative>false&lt;/events_cumulative> &lt;asynchronous_metrics>true&lt;/asynchronous_metrics> &lt;/graphite> &lt;graphite> &lt;host>localhost&lt;/host> &lt;port>42000&lt;/port> &lt;timeout>0.1&lt;/timeout> &lt;interval>1&lt;/interval> &lt;root_path>one_sec&lt;/root_path> &lt;metrics>true&lt;/metrics> &lt;events>true&lt;/events> &lt;events_cumulative>false&lt;/events_cumulative> &lt;asynchronous_metrics>false&lt;/asynchronous_metrics> &lt;/graphite> --> &lt;!-- Serve endpoint for Prometheus monitoring. --> &lt;!-- endpoint - mertics path (relative to root, statring with "/") port - port to setup server. If not defined or 0 than http_port used metrics - send data from table system.metrics events - send data from table system.events asynchronous_metrics - send data from table system.asynchronous_metrics status_info - send data from different component from CH, ex: Dictionaries status --> &lt;!-- &lt;prometheus> &lt;endpoint>/metrics&lt;/endpoint> &lt;port>9363&lt;/port> &lt;metrics>true&lt;/metrics> &lt;events>true&lt;/events> &lt;asynchronous_metrics>true&lt;/asynchronous_metrics> &lt;status_info>true&lt;/status_info> &lt;/prometheus> --> &lt;!-- Query log. Used only for queries with setting log_queries = 1. --> &lt;query_log> &lt;!-- What table to insert data. If table is not exist, it will be created. When query log structure is changed after system update, then old table will be renamed and new table will be created automatically. --> &lt;database>system&lt;/database> &lt;table>query_log&lt;/table> &lt;!-- PARTITION BY expr: https://clickhouse.com/docs/en/table_engines/mergetree-family/custom_partitioning_key/ Example: event_date toMonday(event_date) toYYYYMM(event_date) toStartOfHour(event_time) --> &lt;partition_by>toYYYYMM(event_date)&lt;/partition_by> &lt;!-- Table TTL specification: https://clickhouse.com/docs/en/engines/table-engines/mergetree-family/mergetree/#mergetree-table-ttl Example: event_date + INTERVAL 1 WEEK event_date + INTERVAL 7 DAY DELETE event_date + INTERVAL 2 WEEK TO DISK 'bbb' &lt;ttl>event_date + INTERVAL 30 DAY DELETE&lt;/ttl> --> &lt;!-- Instead of partition_by, you can provide full engine expression (starting with ENGINE = ) with parameters, Example: &lt;engine>ENGINE = MergeTree PARTITION BY toYYYYMM(event_date) ORDER BY (event_date, event_time) SETTINGS index_granularity = 1024&lt;/engine> --> &lt;!-- Interval of flushing data. --> &lt;flush_interval_milliseconds>7500&lt;/flush_interval_milliseconds> &lt;/query_log> &lt;!-- Trace log. Stores stack traces collected by query profilers. See query_profiler_real_time_period_ns and query_profiler_cpu_time_period_ns settings. --> &lt;trace_log> &lt;database>system&lt;/database> &lt;table>trace_log&lt;/table> &lt;partition_by>toYYYYMM(event_date)&lt;/partition_by> &lt;flush_interval_milliseconds>7500&lt;/flush_interval_milliseconds> &lt;/trace_log> &lt;!-- Query thread log. Has information about all threads participated in query execution. Used only for queries with setting log_query_threads = 1. --> &lt;query_thread_log> &lt;database>system&lt;/database> &lt;table>query_thread_log&lt;/table> &lt;partition_by>toYYYYMM(event_date)&lt;/partition_by> &lt;flush_interval_milliseconds>7500&lt;/flush_interval_milliseconds> &lt;/query_thread_log> &lt;!-- Query views log. Has information about all dependent views associated with a query. Used only for queries with setting log_query_views = 1. --> &lt;query_views_log> &lt;database>system&lt;/database> &lt;table>query_views_log&lt;/table> &lt;partition_by>toYYYYMM(event_date)&lt;/partition_by> &lt;flush_interval_milliseconds>7500&lt;/flush_interval_milliseconds> &lt;/query_views_log> &lt;!-- Uncomment if use part log. Part log contains information about all actions with parts in MergeTree tables (creation, deletion, merges, downloads).--> &lt;part_log> &lt;database>system&lt;/database> &lt;table>part_log&lt;/table> &lt;partition_by>toYYYYMM(event_date)&lt;/partition_by> &lt;flush_interval_milliseconds>7500&lt;/flush_interval_milliseconds> &lt;/part_log> &lt;!-- Uncomment to write text log into table. Text log contains all information from usual server log but stores it in structured and efficient way. The level of the messages that goes to the table can be limited (&lt;level>), if not specified all messages will go to the table. &lt;text_log> &lt;database>system&lt;/database> &lt;table>text_log&lt;/table> &lt;flush_interval_milliseconds>7500&lt;/flush_interval_milliseconds> &lt;level>&lt;/level> &lt;/text_log> --> &lt;!-- Metric log contains rows with current values of ProfileEvents, CurrentMetrics collected with "collect_interval_milliseconds" interval. --> &lt;metric_log> &lt;database>system&lt;/database> &lt;table>metric_log&lt;/table> &lt;flush_interval_milliseconds>7500&lt;/flush_interval_milliseconds> &lt;collect_interval_milliseconds>1000&lt;/collect_interval_milliseconds> &lt;/metric_log> &lt;!-- Asynchronous metric log contains values of metrics from system.asynchronous_metrics. --> &lt;asynchronous_metric_log> &lt;database>system&lt;/database> &lt;table>asynchronous_metric_log&lt;/table> &lt;!-- Asynchronous metrics are updated once a minute, so there is no need to flush more often. --> &lt;flush_interval_milliseconds>7000&lt;/flush_interval_milliseconds> &lt;/asynchronous_metric_log> &lt;!-- OpenTelemetry log contains OpenTelemetry trace spans. --> &lt;opentelemetry_span_log> &lt;!-- The default table creation code is insufficient, this &lt;engine> spec is a workaround. There is no 'event_time' for this log, but two times, start and finish. It is sorted by finish time, to avoid inserting data too far away in the past (probably we can sometimes insert a span that is seconds earlier than the last span in the table, due to a race between several spans inserted in parallel). This gives the spans a global order that we can use to e.g. retry insertion into some external system. --> &lt;engine> engine MergeTree partition by toYYYYMM(finish_date) order by (finish_date, finish_time_us, trace_id) &lt;/engine> &lt;database>system&lt;/database> &lt;table>opentelemetry_span_log&lt;/table> &lt;flush_interval_milliseconds>7500&lt;/flush_interval_milliseconds> &lt;/opentelemetry_span_log> &lt;!-- Crash log. Stores stack traces for fatal errors. This table is normally empty. --> &lt;crash_log> &lt;database>system&lt;/database> &lt;table>crash_log&lt;/table> &lt;partition_by/> &lt;flush_interval_milliseconds>1000&lt;/flush_interval_milliseconds> &lt;/crash_log> &lt;!-- Session log. Stores user log in (successful or not) and log out events. --> &lt;session_log> &lt;database>system&lt;/database> &lt;table>session_log&lt;/table> &lt;partition_by>toYYYYMM(event_date)&lt;/partition_by> &lt;flush_interval_milliseconds>7500&lt;/flush_interval_milliseconds> &lt;/session_log> &lt;!-- Parameters for embedded dictionaries, used in Yandex.Metrica. See https://clickhouse.com/docs/en/dicts/internal_dicts/ --> &lt;!-- Path to file with region hierarchy. --> &lt;!-- &lt;path_to_regions_hierarchy_file>/opt/geo/regions_hierarchy.txt&lt;/path_to_regions_hierarchy_file> --> &lt;!-- Path to directory with files containing names of regions --> &lt;!-- &lt;path_to_regions_names_files>/opt/geo/&lt;/path_to_regions_names_files> --> &lt;!-- &lt;top_level_domains_path>/var/lib/clickhouse/top_level_domains/&lt;/top_level_domains_path> --> &lt;!-- Custom TLD lists. Format: &lt;name>/path/to/file&lt;/name> Changes will not be applied w/o server restart. Path to the list is under top_level_domains_path (see above). --> &lt;top_level_domains_lists> &lt;!-- &lt;public_suffix_list>/path/to/public_suffix_list.dat&lt;/public_suffix_list> --> &lt;/top_level_domains_lists> &lt;!-- Configuration of external dictionaries. See: https://clickhouse.com/docs/en/sql-reference/dictionaries/external-dictionaries/external-dicts --> &lt;dictionaries_config>*_dictionary.xml&lt;/dictionaries_config> &lt;!-- Configuration of user defined executable functions --> &lt;user_defined_executable_functions_config>*_function.xml&lt;/user_defined_executable_functions_config> &lt;!-- Uncomment if you want data to be compressed 30-100% better. Don't do that if you just started using ClickHouse. --> &lt;!-- &lt;compression> &lt;!- - Set of variants. Checked in order. Last matching case wins. If nothing matches, lz4 will be used. - -> &lt;case> &lt;!- - Conditions. All must be satisfied. Some conditions may be omitted. - -> &lt;min_part_size>10000000000&lt;/min_part_size> &lt;!- - Min part size in bytes. - -> &lt;min_part_size_ratio>0.01&lt;/min_part_size_ratio> &lt;!- - Min size of part relative to whole table size. - -> &lt;!- - What compression method to use. - -> &lt;method>zstd&lt;/method> &lt;/case> &lt;/compression> --> &lt;!-- Configuration of encryption. The server executes a command to obtain an encryption key at startup if such a command is defined, or encryption codecs will be disabled otherwise. The command is executed through /bin/sh and is expected to write a Base64-encoded key to the stdout. --> &lt;encryption_codecs> &lt;!-- aes_128_gcm_siv --> &lt;!-- Example of getting hex key from env --> &lt;!-- the code should use this key and throw an exception if its length is not 16 bytes --> &lt;!--key_hex from_env="...">&lt;/key_hex --> &lt;!-- Example of multiple hex keys. They can be imported from env or be written down in config--> &lt;!-- the code should use these keys and throw an exception if their length is not 16 bytes --> &lt;!-- key_hex id="0">...&lt;/key_hex --> &lt;!-- key_hex id="1" from_env="..">&lt;/key_hex --> &lt;!-- key_hex id="2">...&lt;/key_hex --> &lt;!-- current_key_id>2&lt;/current_key_id --> &lt;!-- Example of getting hex key from config --> &lt;!-- the code should use this key and throw an exception if its length is not 16 bytes --> &lt;!-- key>...&lt;/key --> &lt;!-- example of adding nonce --> &lt;!-- nonce>...&lt;/nonce --> &lt;!-- /aes_128_gcm_siv --> &lt;/encryption_codecs> &lt;!-- Allow to execute distributed DDL queries (CREATE, DROP, ALTER, RENAME) on cluster. Works only if ZooKeeper is enabled. Comment it if such functionality isn't required. --> &lt;distributed_ddl> &lt;!-- Path in ZooKeeper to queue with DDL queries --> &lt;path>/clickhouse/task_queue/ddl&lt;/path> &lt;!-- Settings from this profile will be used to execute DDL queries --> &lt;!-- &lt;profile>default&lt;/profile> --> &lt;!-- Controls how much ON CLUSTER queries can be run simultaneously. --> &lt;!-- &lt;pool_size>1&lt;/pool_size> --> &lt;!-- Cleanup settings (active tasks will not be removed) --> &lt;!-- Controls task TTL (default 1 week) --> &lt;!-- &lt;task_max_lifetime>604800&lt;/task_max_lifetime> --> &lt;!-- Controls how often cleanup should be performed (in seconds) --> &lt;!-- &lt;cleanup_delay_period>60&lt;/cleanup_delay_period> --> &lt;!-- Controls how many tasks could be in the queue --> &lt;!-- &lt;max_tasks_in_queue>1000&lt;/max_tasks_in_queue> --> &lt;/distributed_ddl> &lt;!-- Settings to fine tune MergeTree tables. See documentation in source code, in MergeTreeSettings.h --> &lt;!-- &lt;merge_tree> &lt;max_suspicious_broken_parts>5&lt;/max_suspicious_broken_parts> &lt;/merge_tree> --> &lt;!-- Protection from accidental DROP. If size of a MergeTree table is greater than max_table_size_to_drop (in bytes) than table could not be dropped with any DROP query. If you want do delete one table and don't want to change clickhouse-server config, you could create special file &lt;clickhouse-path>/flags/force_drop_table and make DROP once. By default max_table_size_to_drop is 50GB; max_table_size_to_drop=0 allows to DROP any tables. The same for max_partition_size_to_drop. Uncomment to disable protection. --> &lt;!-- &lt;max_table_size_to_drop>0&lt;/max_table_size_to_drop> --> &lt;!-- &lt;max_partition_size_to_drop>0&lt;/max_partition_size_to_drop> --> &lt;!-- Example of parameters for GraphiteMergeTree table engine --> &lt;graphite_rollup_example> &lt;pattern> &lt;regexp>click_cost&lt;/regexp> &lt;function>any&lt;/function> &lt;retention> &lt;age>0&lt;/age> &lt;precision>3600&lt;/precision> &lt;/retention> &lt;retention> &lt;age>86400&lt;/age> &lt;precision>60&lt;/precision> &lt;/retention> &lt;/pattern> &lt;default> &lt;function>max&lt;/function> &lt;retention> &lt;age>0&lt;/age> &lt;precision>60&lt;/precision> &lt;/retention> &lt;retention> &lt;age>3600&lt;/age> &lt;precision>300&lt;/precision> &lt;/retention> &lt;retention> &lt;age>86400&lt;/age> &lt;precision>3600&lt;/precision> &lt;/retention> &lt;/default> &lt;/graphite_rollup_example> &lt;!-- Directory in &lt;clickhouse-path> containing schema files for various input formats. The directory will be created if it doesn't exist. --> &lt;format_schema_path>/var/lib/clickhouse/format_schemas/&lt;/format_schema_path> &lt;!-- Default query masking rules, matching lines would be replaced with something else in the logs (both text logs and system.query_log). name - name for the rule (optional) regexp - RE2 compatible regular expression (mandatory) replace - substitution string for sensitive data (optional, by default - six asterisks) --> &lt;query_masking_rules> &lt;rule> &lt;name>hide encrypt/decrypt arguments&lt;/name> &lt;regexp>((?:aes_)?(?:encrypt|decrypt)(?:_mysql)?)\s*\(\s*(?:'(?:\\'|.)+'|.*?)\s*\)&lt;/regexp> &lt;!-- or more secure, but also more invasive: (aes_\w+)\s*\(.*\) --> &lt;replace>\1(???)&lt;/replace> &lt;/rule> &lt;/query_masking_rules> &lt;!-- Uncomment to use custom http handlers. rules are checked from top to bottom, first match runs the handler url - to match request URL, you can use 'regex:' prefix to use regex match(optional) methods - to match request method, you can use commas to separate multiple method matches(optional) headers - to match request headers, match each child element(child element name is header name), you can use 'regex:' prefix to use regex match(optional) handler is request handler type - supported types: static, dynamic_query_handler, predefined_query_handler query - use with predefined_query_handler type, executes query when the handler is called query_param_name - use with dynamic_query_handler type, extracts and executes the value corresponding to the &lt;query_param_name> value in HTTP request params status - use with static type, response status code content_type - use with static type, response content-type response_content - use with static type, Response content sent to client, when using the prefix 'file://' or 'config://', find the content from the file or configuration send to client. &lt;http_handlers> &lt;rule> &lt;url>/&lt;/url> &lt;methods>POST,GET&lt;/methods> &lt;headers>&lt;pragma>no-cache&lt;/pragma>&lt;/headers> &lt;handler> &lt;type>dynamic_query_handler&lt;/type> &lt;query_param_name>query&lt;/query_param_name> &lt;/handler> &lt;/rule> &lt;rule> &lt;url>/predefined_query&lt;/url> &lt;methods>POST,GET&lt;/methods> &lt;handler> &lt;type>predefined_query_handler&lt;/type> &lt;query>SELECT * FROM system.settings&lt;/query> &lt;/handler> &lt;/rule> &lt;rule> &lt;handler> &lt;type>static&lt;/type> &lt;status>200&lt;/status> &lt;content_type>text/plain; charset=UTF-8&lt;/content_type> &lt;response_content>config://http_server_default_response&lt;/response_content> &lt;/handler> &lt;/rule> &lt;/http_handlers> --> &lt;send_crash_reports> &lt;!-- Changing &lt;enabled> to true allows sending crash reports to --> &lt;!-- the ClickHouse core developers team via Sentry https://sentry.io --> &lt;!-- Doing so at least in pre-production environments is highly appreciated --> &lt;enabled>false&lt;/enabled> &lt;!-- Change &lt;anonymize> to true if you don't feel comfortable attaching the server hostname to the crash report --> &lt;anonymize>false&lt;/anonymize> &lt;!-- Default endpoint s hould be changed to different Sentry DSN only if you have --> &lt;!-- some in-house engineers or hired consultants who're going to debug ClickHouse issues for you --> &lt;endpoint>&lt;/endpoint> &lt;/send_crash_reports> &lt;!-- Uncomment to disable ClickHouse internal DNS caching. --> &lt;!-- &lt;disable_internal_dns_cache>1&lt;/disable_internal_dns_cache> --> &lt;!-- You can also configure rocksdb like this: --> &lt;!-- &lt;rocksdb> &lt;options> &lt;max_background_jobs>8&lt;/max_background_jobs> &lt;/options> &lt;column_family_options> &lt;num_levels>2&lt;/num_levels> &lt;/column_family_options> &lt;tables> &lt;table> &lt;name>TABLE&lt;/name> &lt;options> &lt;max_background_jobs>8&lt;/max_background_jobs> &lt;/options> &lt;column_family_options> &lt;num_levels>2&lt;/num_levels> &lt;/column_family_options> &lt;/table> &lt;/tables> &lt;/rocksdb> --> &lt;timezone>Asia/Shanghai&lt;/timezone> &lt;/clickhouse> 启动命令 docker-compose up -d TODO 现在配置的 zookeeper 还是单机部署的，有空看看部署个zookeeper集群怎么配置
...</p></div><footer class=entry-footer><span title='2022-08-12 17:30:00 +0800 CST'>2022-08-12 17:30:00</span>&nbsp;·&nbsp;26 min&nbsp;·&nbsp;5510 words&nbsp;·&nbsp;johnpoint</footer><a class=entry-link aria-label="post link to 使用 docker-compose 搭建 clickhouse 集群" href=https://blog.lvcshu.com/2022/08/12/deploy-clickhouse-by-docker-compose/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://blog.lvcshu.com/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://blog.lvcshu.com/>johnpoint's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script async src=https://umami.uipo.cc/script.js data-website-id=7319ce07-a672-4d99-bf07-9ebb227d449d></script></body></html>